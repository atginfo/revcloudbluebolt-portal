<!--
  @description       : 
  @author            : David Sam
  @group             : Cognizant
  @last modified on  : 06-13-2025
  @last modified by  : David Sam
-->

<template>
    <!-- //TODO: Change the title to Asset Dashbord -->

   <!-- <lightning-card  title="Asset - Monthly Recurring Revenue" icon-name="action:preview"> 
      <lightning-spinner if:true={isLoading}></lightning-spinner>
    <div if:true={isLoading}>
      <template if:true={chartConfiguration}> -->
        <!-- <div class="slds-m-around_medium">
          <p>User1 Id:</p>
          {currentUserId} 
        </div> -->
       <!-- <div class="chart-container">
          <canvas id="assetVisualizationChart" lwc:dom="manual" chart-config={chartConfiguration}></canvas> -->
          <!-- <canvas id="assetVisualizationChart" lwc:dom="manual" class="linechart" style="width:100%;max-width:1000px" chart-config={chartConfiguration}></canvas> -->
     <!--   </div>
      </template>
    </div>
  </lightning-card> -->

   <!-- <div class="slds-m-around_medium">
          <p></p>
          <p>Asset List with inline updates</p>
          <p></p>
    </div> -->

  <!-- <lightning-card title="Asset's List" >
    <div class="slds-m-around_medium">
        <lightning-datatable
                key-field="Id"
                data={records}
                columns={columns}
                hide-checkbox-column
                draft-values={draftValues}
                sorted-by={sortBy}
                sorted-direction={sortDirection}
                onsort={doSorting}
                onsave={handleSave}>
        </lightning-datatable>
    </div>
</lightning-card> -->

<!-- <lightning-card title="Asset's temp dipslay" >

  <lightning-button icon-name="utility:expand_alt" onclick={expandAllRows} variant="container"></lightning-button>
  <lightning-tree-grid  
    data={parseData2}
    columns={columns}
    expanded-rows={expandedRows}
    key-field="Name">
  </lightning-tree-grid>

</lightning-card> -->

<div>

  <lightning-card title= {dynamicTitle}
    icon-name="custom:custom17" class="slds-m-around_medium">
   
    <lightning-button icon-name="utility:expand_alt" variant="container" label={expandCollapseLabel} onclick={toggleExpandCollapseAll}></lightning-button>
    <div class="slds-size_1-of-3" style="width: 50%">
      <div class="right-aligned-container">
      <lightning-input type="date" name="assetDate" label="Asset validity Date" value={validityDate}
        date-style="short" field-level-help="Select the asset validity date to display. The default is today."
        variant="label-inline" onchange={handleInputChange}>
      </lightning-input>
      </div>
    </div>
    <!-- <lightning-tree-grid  
      data={gridData}  
      columns={columns}
      expanded-rows={expandedRows}
      onsort={doSorting}
      onrowselection={handleRowSelection}
      onrowaction={handleRowAction}
      max-row-selection="1"
      key-field="Name">
    </lightning-tree-grid> -->
    <lightning-tree-grid  
      data={gridDataWithHighlight}
      columns={columns}
      expanded-rows={expandedRows}
      onsort={doSorting}
      onrowselection={handleRowSelection}
      onrowaction={handleRowAction}
      max-row-selection="1"
      key-field="Name"
      row-class={rowClass}>
    </lightning-tree-grid>

    <!-- <div lwc:if={renderFlow} class="slds-m-around_medium">
      <div class={modalClass} role="dialog" aria-labelledby="my-modal-title">
            <div class="slds-modal__content slds-p-around_medium">
        <lightning-flow if:true={renderFlow}
          flow-api-name={flowApiName}
          flow-input-variables={flowInputVariables}
          onstatuschange={handleFlowStatusChange}>
        </lightning-flow>
      </div>
      </div>
        <div class="slds-modal__footer">
          <lightning-button label="Cancel" variant="neutral" onclick={handleClose}></lightning-button>
        </div>
      <div class={modalBgClass} onclick={handleClose}></div>
    </div> -->

    <template if:true={renderFlow}>
        <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <button class="slds-button slds-modal__close" title="Close" onclick={closeModal}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" size="small"></lightning-icon>
                    </button>
                    <h2 class="slds-text-heading_medium">Asset Action</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <lightning-flow
                        flow-api-name={flowApiName}
                        flow-input-variables={flowInputVariables}
                        onstatuschange={handleStatusChange}
                        onfinish={handleFinish}>
                    </lightning-flow>
                </div>
                <footer class="slds-modal__footer">
                    <button class="slds-button slds-button_neutral" onclick={closeModal}>Close</button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>

  </lightning-card>

</div>
</template>